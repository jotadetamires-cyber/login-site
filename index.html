<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Cadastro de Serviços Online</title>
<style>
  body { font-family: Arial; margin: 20px; }
  input { margin: 5px; }
  button { margin: 5px; }
</style>
</head>
<body>
<h2>Cadastro de Serviços</h2>

<form id="formServico">
  <input type="text" id="nome" placeholder="Nome do serviço" required>
  <input type="number" id="preco" placeholder="Preço" required>
  <button type="submit">Cadastrar</button>
</form>

<h3>Lista de Serviços:</h3>
<ul id="listaServicos"></ul>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.16.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.16.0/firebase-database-compat.js"></script>

<script>
// Configurações do seu projeto Firebase
const firebaseConfig = {
  apiKey: "SUA_API_KEY",
  authDomain: "SEU_AUTH_DOMAIN",
  databaseURL: "SUA_DATABASE_URL",
  projectId: "SEU_PROJECT_ID",
  storageBucket: "SEU_STORAGE_BUCKET",
  messagingSenderId: "SEU_MESSAGING_SENDER_ID",
  appId: "SEU_APP_ID"
};

// Inicializar Firebase
firebase.initializeApp(firebaseConfig);
const database = firebase.database();

const form = document.getElementById('formServico');
const listaServicos = document.getElementById('listaServicos');
let editId = null; // ID do serviço que está sendo editado

// Cadastrar ou atualizar serviço
form.addEventListener('submit', function(e){
    e.preventDefault();
    const nome = document.getElementById('nome').value;
    const preco = document.getElementById('preco').value;

    if(editId){ // Atualizar
        database.ref('servicos/' + editId).update({nome, preco});
        editId = null;
    } else { // Criar
        const novoServicoRef = database.ref('servicos').push();
        novoServicoRef.set({nome, preco});
    }

    form.reset();
});

// Ler dados em tempo real
const servicosRef = database.ref('servicos');
servicosRef.on('value', (snapshot) => {
    listaServicos.innerHTML = '';
    const dados = snapshot.val();
    for (let id in dados) {
        const s = dados[id];
        const li = document.createElement('li');
        li.textContent = `${s.nome} - $${s.preco}`;

        // Botão Editar
        const btnEditar = document.createElement('button');
        btnEditar.textContent = 'Editar';
        btnEditar.onclick = () => {
            document.getElementById('nome').value = s.nome;
            document.getElementById('preco').value = s.preco;
            editId = id;
        };

        // Botão Deletar
        const btnDeletar = document.createElement('button');
        btnDeletar.textContent = 'Deletar';
        btnDeletar.onclick = () => {
            database.ref('servicos/' + id).remove();
        };

        li.appendChild(btnEditar);
        li.appendChild(btnDeletar);
        listaServicos.appendChild(li);
    }
});
</script>
</body>
</html>
